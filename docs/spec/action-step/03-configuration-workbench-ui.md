# Step 03：設定模式工作台 UI（框選與座標編修）

## 目標

提供可視化設定模式，讓使用者能以拖曳框選方式定義 `cropMain / ocrTooth / ocrExtra / overlayAnchor`。

## 前置依賴

- `01-project-foundation-and-config-store.md`
- `02-capture-and-coordinate-pipeline.md`

## 實作清單

1. 建立設定頁主畫面（參考 `docs/ui/configuration.html`）：
   - 左側導覽、中央畫布、右側屬性面板、底部狀態列
2. 使用 Canvas + Konva.js 實作 ROI 元件：
   - 支援拖曳、縮放、選取、切換可見性
   - 顯示即時座標與尺寸
3. 實作屬性面板雙向綁定：
   - 輸入 `x/y/width/height` 時同步更新畫布
   - 拖曳框選時同步更新輸入欄位
4. 加入座標合法性即時驗證與提示：
   - 超界、負值、零尺寸要即時顯示錯誤
5. 實作「儲存設定」與「重置區域」操作
6. 實作「由系統匣返回設定頁」的畫面狀態還原：
   - 若視窗原本為隱藏，從 Tray 開啟時需回到 Config 畫面
   - 保留上次選取 ROI 與面板內容（若有狀態管理）

## 畫面風格要求

- 色彩與風格對齊 `docs/ui/configuration.html`
- 主要按鈕使用 `primary #137fec`
- 深色主題需可讀，邊框與卡片層次清楚
- 框選區塊顏色應具語義區分（主裁切、OCR 區、Anchor）

## 交付物

- 可用的設定模式頁面
- ROI 操作元件
- 設定儲存/重置功能

## 驗收標準

- 使用者可在畫布完成四類區域定義並儲存成功。
- 手動修改右側欄位與拖曳框選結果一致。
- 非法值會被阻擋，且不會寫入設定檔。
- 從系統匣雙擊或點 `設定` 開啟時，能直接進入可操作的 Config 頁面。
